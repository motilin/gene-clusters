(this["webpackJsonpgene-clusters"]=this["webpackJsonpgene-clusters"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(8),u=n.n(c),s=(n(15),n(16),n(7)),i=n(10),o=n(0),f=n.n(o),p=n(3),l=n(9),v=n(1),b=Object(r.createContext)();function x(e){var t=e.children,n=Object(r.useState)(),a=Object(l.a)(n,2),c=a[0],u=a[1],s=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/".concat(t));case 2:return n=e.sent,u(n.status),e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,u(n.status),e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("groupedByPatient");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("patientByIndex");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("indexByPatient");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("numberOfPatients");case 2:return t=e.sent,e.abrupt("return",parseInt(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("indexByGene");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("geneByIndex");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("numberOfGenes");case 2:return t=e.sent,e.abrupt("return",parseInt(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("maxValue");case 2:return t=e.sent,e.abrupt("return",parseInt(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/matrix");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/flattened");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){y()}),[]),200!==c?Object(v.jsxs)("h2",{className:"serverError",children:["Server error - ",c]}):Object(v.jsx)(b.Provider,{value:{getGroupedByPatient:o,getPatientByIndex:x,getIndexByPatient:j,getNumberOfPatients:d,getIndexByGene:h,getGeneByIndex:O,getNumberOfGenes:y,getMaxValue:g,getMatrix:m,getFlattened:w},children:t})}var j=10500,d=250;function h(e){var t=e.serialNum,n=e.numberOfLayers,a=e.isIncluded,c=e.isBackground,u=Object(r.useContext)(b),o=u.getFlattened,l=u.getNumberOfGenes,x=[Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useRef)(null)],h=Object(r.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t().then((function(e){return n(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),O=Object(r.useCallback)((function(e,t,n){var r,a=Object(i.a)(e),c=1,u=1;a[0]*n>=j&&(c=2,a[0]-=j/n),a[1]*n>=j&&(u=3,a[1]-=j/n),t[r=c*u===6?3:c*u-1].fillStyle="rgb(255, 0, 0, 0.5)",t[r].fillRect(a[0]*n,a[1]*n,n,n)}),[]);Object(r.useEffect)((function(){l().then((function(e){y(e)}))}),[]);var y=function(e){var r,u=21e3/e,i=Object(s.a)(x);try{for(i.s();!(r=i.n()).done;){var f=r.value;if(!f.current||!f.current.getContext)return null}}catch(v){i.e(v)}finally{i.f()}for(var p=[],l=0;l<x.length;l++)p[l]=x[l].current.getContext("2d"),p[l].canvas.width=j,p[l].canvas.height=j,c&&(p[l].fillStyle="black",p[l].fillRect(0,0,j,j));c||h(o,(function(e){var r,c=Object(s.a)(e);try{for(c.s();!(r=c.n()).done;){var i=r.value;if(i._id%n===t){console.log("patient id",i._id);for(var o=[],f=0,l=Object.keys(i.value);f<l.length;f++){var b=l[f];a(i.value[b])&&o.push(b)}o.pairs((function(e){e=[parseInt(e[0]),parseInt(e[1])],O(e,p,u),e[0]!==e[1]&&O(e.reverse(),p,u)}))}}}catch(v){c.e(v)}finally{c.f()}}))};return Object(v.jsxs)("div",{className:"quadruple",children:[Object(v.jsx)("canvas",{ref:x[0],style:{left:"0px",top:"0px"}}),Object(v.jsx)("canvas",{ref:x[1],style:{left:"".concat(d,"px"),top:"0px"}}),Object(v.jsx)("canvas",{ref:x[2],style:{left:"0px",top:"".concat(d,"px")}}),Object(v.jsx)("canvas",{ref:x[3],style:{left:"".concat(d,"px"),top:"".concat(d,"px")}})]})}Array.prototype.pairs=function(e){for(var t=0;t<this.length;t++)for(var n=t;n<this.length;n++)e([this[t],this[n]])};var O=Array.from(Array(10).keys());function y(){var e=Object(r.useCallback)((function(e){return!0}),[]);return Object(v.jsxs)("div",{className:"heatmap",children:[Object(v.jsx)(h,{numberOfLayers:50,serialNum:0,isIncluded:e,isBackground:!0}),O.map((function(t,n){return Object(v.jsx)(h,{numberOfLayers:50,serialNum:n,isIncluded:e,isBackground:!1},n)}))]})}function g(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y,{})})}var m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};n(19);u.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(x,{children:Object(v.jsx)(g,{})})}),document.getElementById("root")),m()}},[[20,1,2]]]);
//# sourceMappingURL=main.8b2c0235.chunk.js.map